<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SingStar â˜… ì½”ì¸ ë…¸ë˜ë°© Premium</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
    <style>
        :root { --ss-purple: #7d2ae8; --ss-pink: #ff007b; --glass: rgba(255, 255, 255, 0.07); --ss-gradient: linear-gradient(45deg, #8e2de2, #f000ff); }
        body { background: #0b0915; color: white; font-family: 'Pretendard', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */
        .neon-bg { position: fixed; width: 600px; height: 600px; background: radial-gradient(circle, var(--ss-purple) 0%, transparent 70%); filter: blur(100px); opacity: 0.15; z-index: 0; pointer-events: none; animation: drift 20s infinite alternate; }
        @keyframes drift { from { top: -10%; left: -10%; } to { top: 70%; left: 80%; } }
        
        /* [ì‚¬ì´ë“œë°” ë””ìì¸ - PC ê°ì„± ê·¸ëŒ€ë¡œ ìœ ì§€] */
        .sidebar { width: 300px; min-width: 300px; background: var(--glass); backdrop-filter: blur(30px); border-right: 1px solid rgba(255,255,255,0.1); padding: 30px; display: flex; flex-direction: column; z-index: 100; box-sizing: border-box; }
        .user-card { background: linear-gradient(135deg, var(--ss-purple), var(--ss-pink)); padding: 25px; border-radius: 25px; box-shadow: 0 15px 30px rgba(0,0,0,0.4); margin-bottom: 20px; transition: 0.5s; }
        .nav-menu { list-style:none; padding:0; margin:0; }
        .nav-menu li { padding: 15px 20px; border-radius: 15px; cursor: pointer; transition: 0.2s; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; font-size: 15px; }
        .nav-menu li:hover { background: rgba(255,255,255,0.1); }
        .nav-menu li.active { background: white; color: black; font-weight: bold; }
        .reserve-box { background: rgba(0,0,0,0.3); border-radius: 20px; padding: 20px; flex-grow: 1; border: 1px solid rgba(255,255,255,0.05); overflow-y: auto; margin-top: 20px; }
        .reserve-item { font-size: 13px; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); color: #ccc; }

        /* [ë©”ì¸ ì»¨í…ì¸  ì˜ì—­] */
        .main-view { flex: 1; padding: 40px 50px; overflow-y: auto; z-index: 10; position: relative; scroll-behavior: smooth; }
        .search-container { margin-bottom: 40px; position: relative; width: 100%; max-width: 700px; }
        .main-search { width: 100%; padding: 18px 30px; border-radius: 40px; border: 1px solid #333; background: #1a1a2e; color: white; font-size: 16px; outline: none; box-sizing: border-box; }

        /* [ë…¸ë˜ ì¹´ë“œ ë° ë²„íŠ¼ ë””ìì¸] */
        .chart-card { display: flex; align-items: center; background: rgba(255,255,255,0.03); padding: 15px 20px; border-radius: 18px; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .chart-card:hover { transform: translateX(5px); background: rgba(255,255,255,0.06); }
        .rank-num { font-size: 20px; font-weight: 900; color: var(--ss-pink); margin-right: 15px; min-width: 25px; }
        .song-info { flex: 1; }
        .card-btns { display: flex; gap: 8px; align-items: center; flex-wrap: nowrap; } /* ëª¨ë°”ì¼ì—ì„œ ì¤„ë°”ê¿ˆ ë°©ì§€ */
        
        .btn-direct { background: linear-gradient(135deg, #007bff, #00c6ff) !important; color: white; border: none; padding: 10px 18px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 12px; white-space: nowrap; transition: 0.2s; }
        .btn-reserve { background: linear-gradient(135deg, #ff007b, #ff5e62) !important; color: white; border: none; padding: 10px 18px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 12px; white-space: nowrap; transition: 0.2s; }
        .btn-direct:active, .btn-reserve:active { transform: scale(0.95); }

        /* [ëª¨ë°”ì¼ ëŒ€ì‘: PC ë ˆì´ì•„ì›ƒ í˜•íƒœ ìœ ì§€] */
        @media (max-width: 768px) {
            .sidebar { width: 85px; min-width: 85px; padding: 15px 10px; align-items: center; }
            .user-card { padding: 15px 10px; border-radius: 15px; margin-bottom: 15px; width: 100%; box-sizing: border-box; }
            .user-card h3, .user-card p, .user-card div { display: none; }
            .user-card::before { content: 'Sing'; font-size: 11px; font-weight: bold; }
            
            .nav-menu li { justify-content: center; padding: 15px 0; font-size: 20px; }
            .nav-menu li span { display: none; } /* ë©”ë‰´ ê¸€ì ìˆ¨ê¹€ */
            .reserve-box { display: none; } /* ê³µê°„ í™•ë³´ë¥¼ ìœ„í•´ ìˆ¨ê¹€ */
            
            .main-view { padding: 25px 15px; }
            .chart-card { padding: 12px 15px; }
            .rank-num { font-size: 16px; margin-right: 10px; }
            .song-title { font-size: 14px; }
            .btn-direct, .btn-reserve { padding: 8px 12px; font-size: 11px; }
        }

        /* [ê³µí†µ ì„¹ì…˜ ë° ëª¨ë‹¬] */
        .content-section { display: none; animation: fadeIn 0.3s ease-out; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #karaoke-view { display: none; position: fixed; inset: 0; background: #000; z-index: 9000; flex-direction: column; align-items: center; justify-content: center; }
        .btn-control { padding: 10px 18px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; cursor: pointer; font-weight: bold; font-size: 13px; }

        #score-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 10000; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .score-card { background: #1a1a2e; padding: 40px; border-radius: 40px; border: 2px solid var(--ss-pink); text-align: center; width: 85%; max-width: 380px; box-shadow: 0 0 50px rgba(255, 0, 123, 0.3); }
        
        /* í…ìŠ¤íŠ¸ ê·¸ë¼ë°ì´ì…˜ ë° í˜¸í™˜ì„± í•´ê²° */
        .score-text { 
            font-size: 90px; font-weight: 900; margin: 20px 0; font-style: italic;
            background: var(--ss-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: var(--ss-pink); /* Fallback */
        }
    </style>
</head>
<body>
    <div class="neon-bg"></div>

    <div class="sidebar">
        <div class="user-card" id="user-card-ui">
            <h3 id="display-name" style="margin:0;">SingStar!</h3>
            <p id="user-status" style="font-size:11px; margin:5px 0; opacity:0.8;">FREE MEMBER</p>
            <div style="font-size:11px;">ë‚¨ì€ ê³¡: <span id="remain-songs-val">0</span>ê³¡</div>
        </div>
        <ul class="nav-menu">
            <li class="active" onclick="changeTab(this, 'home')">ğŸ  <span>ë…¸ë˜ë°© ì¸ê¸° ì°¨íŠ¸</span></li>
            <li onclick="changeTab(this, 'favs')">â¤ï¸ <span>ì• ì°½ê³¡ ë¦¬ìŠ¤íŠ¸</span></li>
            <li onclick="changeTab(this, 'billing')">ğŸ’³ <span>ë©¤ë²„ì‹­ ê²°ì œ</span></li>
            <li onclick="changeTab(this, 'profile')">ğŸ™ï¸ <span>ë‚´ ì •ë³´ ê´€ë¦¬</span></li>
            <li onclick="startNextSong()" style="background:var(--ss-purple); margin-top:20px; color:white; justify-content:center; font-weight:bold; box-shadow: 0 4px 15px rgba(125, 42, 232, 0.4);">â–¶ï¸ <span>ì‹œì‘</span></li>
        </ul>
        <div class="reserve-box">
            <div style="font-size:12px; color:var(--ss-pink); font-weight:bold; margin-bottom:10px;">ğŸ“‹ ì˜ˆì•½ ëª©ë¡</div>
            <div id="reserve-list"></div>
        </div>
    </div>

    <div class="main-view">
        <div class="search-container">
            <input type="text" id="main-search-input" class="main-search" placeholder="ì œëª©/ê°€ìˆ˜ ì…ë ¥">
        </div>

        <section id="section-home" class="content-section active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2 style="margin:0; font-size:22px;">ğŸ”¥ ë…¸ë˜ë°© ì¸ê¸° ì°¨íŠ¸</h2>
                <button onclick="luckyDraw()" style="padding:10px 20px; border-radius:50px; border:none; background:#ffcc00; color:#000; font-weight:bold; cursor:pointer;">ğŸ² ì¶”ì²œ</button>
            </div>
            <div id="chart-list"></div>
        </section>

        <section id="section-favs" class="content-section"><h2>â¤ï¸ ë‚˜ì˜ ì• ì°½ê³¡ ë¦¬ìŠ¤íŠ¸</h2><div id="fav-list"></div></section>
        
        <section id="section-billing" class="content-section">
            <h2>ğŸ’³ ë©¤ë²„ì‹­ ìš”ê¸ˆì œ</h2>
            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:20px;">
                <div style="background:rgba(255, 0, 123, 0.1); padding:40px; border-radius:30px; text-align:center; border:1px solid var(--ss-pink);">
                    <h3 style="color:var(--ss-pink);">VIP í”„ë¦¬ë¯¸ì—„</h3>
                    <h1 style="margin:20px 0;">9,900ì›</h1>
                    <button class="btn-direct" style="width:100%; padding:15px; font-size:15px;" onclick="upgradePlan()">ê²°ì œí•˜ê¸°</button>
                </div>
            </div>
        </section>

        <section id="section-profile" class="content-section">
            <h2>ğŸ‘¤ ë‚´ ì •ë³´ ê´€ë¦¬</h2>
            <div style="background:var(--glass); padding:30px; border-radius:25px; max-width:450px;">
                <input type="text" id="edit-nickname" placeholder="ìƒˆ ë‹‰ë„¤ì„" style="width:100%; padding:15px; margin-bottom:20px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
                <button class="btn-reserve" style="width:100%; padding:15px; font-size:15px;" onclick="updateNickname()">ë³€ê²½ ì €ì¥</button>
                <button class="btn-logout" style="flex:1; padding:15px; font-size:15px; background:#444; color:white; border:none; border-radius:20px; cursor:pointer;" onclick="handleLogout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </section>
    </div>

    <div id="karaoke-view">
        <div id="yt-player" style="width:85%; aspect-ratio:16/9; border-radius:25px; overflow:hidden; border: 2px solid rgba(255,255,255,0.1);"></div>
        <div style="margin-top:30px; display:flex; gap:15px; align-items:center;">
            <button class="btn-control" onclick="changeKey(-1)">â™­</button>
            <span id="key-val" style="font-size:20px; font-weight:bold; min-width:30px; text-align:center;">0</span>
            <button class="btn-control" onclick="changeKey(1)">â™¯</button>
            <button class="btn-control" onclick="toggleClubMode()" style="background:linear-gradient(to right, #00f2fe, #4facfe); border:none;">ğŸŒˆ í´ëŸ½</button>
            <button class="btn-control" style="background:var(--ss-pink); border:none;" onclick="exitKaraoke()">ğŸ›‘ ì¢…ë£Œ</button>
        </div>
        <canvas id="visualizer" style="width:60%; height:80px; margin-top:20px;"></canvas>
    </div>

    <div id="score-modal">
        <div class="score-card">
            <h2 style="color:var(--ss-pink); margin:0;">SingStar ì ìˆ˜</h2>
            <div id="final-score" class="score-text">0</div>
            <p id="score-comment" style="opacity:0.8;">ì™€ìš°! ëŒ€ë‹¨í•œ ì‹¤ë ¥ì´ì—ìš”! ğŸ‰</p>
            <div style="display:flex; gap:12px; margin-top:25px;">
                <button onclick="window.shareToKatalk()" style="background:#fee500; color:#3c1e1e; flex:1; padding:15px; border-radius:15px; border:none; font-weight:bold; cursor:pointer;">ì¹´í†¡ ìë‘</button>
                <button onclick="closeScore()" style="flex:1; background:#444; color:white; padding:15px; border-radius:15px; border:none; font-weight:bold; cursor:pointer;">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
    <script>
        if (!Kakao.isInitialized()) Kakao.init('cc6a6b5b5edd90eac6f308fbf5f1ea13');
    </script>
    <div id="auth-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:20000; align-items:center; justify-content:center; backdrop-filter:blur(10px);">
    <div style="background:#1a1a2e; padding:35px; border-radius:30px; border:1px solid var(--ss-purple); width:90%; max-width:380px; position:relative;">
        
        <div id="login-box">
            <h2 style="margin-top:0;">ë¡œê·¸ì¸</h2>
            <input type="text" id="login-id" placeholder="ì•„ì´ë””" style="width:100%; padding:14px; margin-bottom:10px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
            <input type="password" id="login-pw" placeholder="ë¹„ë°€ë²ˆí˜¸" style="width:100%; padding:14px; margin-bottom:20px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
            <button class="btn-direct" style="width:100%; padding:15px; margin-bottom:15px;" onclick="handleLogin()">ë¡œê·¸ì¸</button>
            <div style="display:flex; justify-content:space-between; font-size:13px; color:#888;">
                <span onclick="toggleAuth('join')" style="cursor:pointer; color:var(--ss-pink);">íšŒì›ê°€ì…</span>
                <span onclick="toggleAuth('find')" style="cursor:pointer;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</span>
            </div>
        </div>

        <div id="join-box" style="display:none;">
            <h2 style="margin-top:0;">íšŒì›ê°€ì…</h2>
            <input type="text" id="reg-id" placeholder="ì´ë©”ì¼ ì£¼ì†Œ" style="width:100%; padding:14px; margin-bottom:10px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
            <input type="password" id="reg-pw" placeholder="ë¹„ë°€ë²ˆí˜¸" style="width:100%; padding:14px; margin-bottom:10px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
            <input type="text" id="reg-nick" placeholder="ë‹‰ë„¤ì„" style="width:100%; padding:14px; margin-bottom:20px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
            <button class="btn-direct" style="width:100%; padding:15px;" onclick="handleRegister()">ê°€ì…ì™„ë£Œ</button>
            <p onclick="toggleAuth('login')" style="text-align:center; font-size:13px; margin-top:15px; cursor:pointer; color:#888;">ì´ë¯¸ ê³„ì •ì´ ìˆë‚˜ìš”? ë¡œê·¸ì¸</p>
        </div>

        <div id="find-box" style="display:none;">
            <h2 style="margin-top:0;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</h2>
            <p style="color:#aaa; font-size:13px; margin-bottom:20px;">ê°€ì…í•˜ì‹  ì´ë©”ì¼ë¡œ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.</p>
            <input type="email" id="find-email" placeholder="ì´ë©”ì¼ ì…ë ¥" style="width:100%; padding:14px; margin-bottom:20px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
            <button class="btn-reserve" style="width:100%; padding:15px;" onclick="handleFindPw()">ì „ì†¡í•˜ê¸°</button>
            <p onclick="toggleAuth('login')" style="text-align:center; font-size:13px; margin-top:15px; cursor:pointer; color:#888;">ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</p>
        </div>

        <button onclick="$('#auth-modal').hide()" style="position:absolute; top:20px; right:20px; background:none; border:none; color:#555; font-size:20px; cursor:pointer;">&times;</button>
    </div>
</div>
</body>
</html>