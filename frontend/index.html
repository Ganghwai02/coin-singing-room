<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SingStar â˜… ì½”ì¸ ë…¸ë˜ë°© Premium</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
    <style>
        :root { --ss-purple: #7d2ae8; --ss-pink: #ff007b; --glass: rgba(255, 255, 255, 0.07); --ss-gradient: linear-gradient(45deg, #8e2de2, #f000ff); }
        body { background: #0b0915; color: white; font-family: 'Pretendard', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        .neon-bg { position: fixed; width: 600px; height: 600px; background: radial-gradient(circle, var(--ss-purple) 0%, transparent 70%); filter: blur(100px); opacity: 0.15; z-index: 0; pointer-events: none; animation: drift 20s infinite alternate; }
        @keyframes drift { from { top: -10%; left: -10%; } to { top: 70%; left: 80%; } }
        
        /* ì‚¬ì´ë“œë°” ë° ì¹´ë“œ */
        .sidebar { width: 300px; background: var(--glass); backdrop-filter: blur(30px); border-right: 1px solid rgba(255,255,255,0.1); padding: 30px; display: flex; flex-direction: column; z-index: 10; }
        .user-card { background: linear-gradient(135deg, var(--ss-purple), var(--ss-pink)); padding: 25px; border-radius: 25px; box-shadow: 0 15px 30px rgba(0,0,0,0.4); margin-bottom: 20px; transition: 0.5s; }
        .nav-menu { list-style:none; padding:0; margin:0; }
        .nav-menu li { padding: 15px 20px; border-radius: 15px; cursor: pointer; transition: 0.2s; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }
        .nav-menu li:hover { background: rgba(255,255,255,0.1); }
        .nav-menu li.active { background: white; color: black; font-weight: bold; }
        .reserve-box { background: rgba(0,0,0,0.3); border-radius: 20px; padding: 20px; flex-grow: 1; border: 1px solid rgba(255,255,255,0.05); overflow-y: auto; margin-top: 20px; }
        .reserve-item { font-size: 13px; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); color: #ccc; }

        /* ì»¨í…ì¸  ì˜ì—­ */
        .main-view { flex: 1; padding: 40px 50px; overflow-y: auto; z-index: 10; position: relative; }
        .search-container { margin-bottom: 40px; position: relative; width: 100%; max-width: 700px; }
        .main-search { width: 100%; padding: 18px 30px; border-radius: 40px; border: 1px solid #333; background: #1a1a2e; color: white; font-size: 16px; outline: none; box-sizing: border-box; }

        /* ë²„íŠ¼ í•µì‹¬ ë””ìì¸ (ì•ˆì •í™”) */
        .btn-action { width: 100%; padding: 15px; border-radius: 15px; border: none; background: var(--ss-gradient); color: white; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(240, 0, 255, 0.3); transition: 0.3s; }
        .btn-action:hover { transform: scale(1.02); filter: brightness(1.1); }
        
        .btn-direct { background: linear-gradient(135deg, #007bff, #00c6ff) !important; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .btn-reserve { background: linear-gradient(135deg, #ff007b, #ff5e62) !important; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 12px; }
        
        .btn-control { padding: 10px 18px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; cursor: pointer; font-weight: bold; font-size: 13px; }

        /* ëª¨ë‹¬ ë° ë…¸ë˜ë°© ë·° (ì•ˆì •í™”) */
        #karaoke-view { display: none; position: fixed; inset: 0; background: #000; z-index: 9000; flex-direction: column; align-items: center; justify-content: center; }
        #score-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 10000; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .score-card { background: #1a1a2e; padding: 50px; border-radius: 40px; border: 2px solid var(--ss-pink); text-align: center; width: 380px; box-shadow: 0 0 50px rgba(255, 0, 123, 0.3); }
        .share-btns { display: flex; gap: 12px; margin-top: 25px; }
        .btn-kakao { background: #fee500; color: #3c1e1e; flex: 1; padding: 15px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; }
        .btn-close { flex: 1; background: #444; color: white; padding: 15px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; }

        .content-section { display: none; animation: fadeIn 0.3s ease-out; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .chart-card { display: flex; align-items: center; background: rgba(255,255,255,0.03); padding: 15px 20px; border-radius: 18px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .rank-num { font-size: 20px; font-weight: 900; color: var(--ss-pink); margin-right: 15px; min-width: 25px; }
        .song-info { flex: 1; }
        .card-btns { display: flex; gap: 8px; align-items: center; }
    </style>
</head>
<body>
    <div class="neon-bg"></div>

    <div class="sidebar">
        <div class="user-card" id="user-card-ui">
            <h3 id="display-name" style="margin:0;">SingStar!</h3>
            <p id="user-status" style="font-size:11px; margin:5px 0; opacity:0.8;">FREE MEMBER</p>
            <div style="font-size:11px;">ë‚¨ì€ ê³¡ìˆ˜: <span id="remain-songs-val">0</span>ê³¡</div>
        </div>
        <ul class="nav-menu">
            <li class="active" onclick="changeTab(this, 'home')">ğŸ  ì¸ê¸° ì°¨íŠ¸</li>
            <li onclick="changeTab(this, 'favs')">â¤ï¸ ì• ì°½ê³¡</li>
            <li onclick="changeTab(this, 'billing')">ğŸ’³ ë©¤ë²„ì‹­ ê²°ì œ</li>
            <li onclick="changeTab(this, 'profile')">ğŸ™ï¸ ë‚´ ì •ë³´ ê´€ë¦¬</li>
            <li onclick="startNextSong()" style="background:var(--ss-purple); margin-top:20px; color:white; justify-content:center; font-weight:bold; box-shadow: 0 4px 15px rgba(125, 42, 232, 0.4);">â–¶ï¸ ë‹¤ìŒ ê³¡ ì‹œì‘</li>
        </ul>
        <div class="reserve-box">
            <div style="font-size:12px; color:var(--ss-pink); font-weight:bold; margin-bottom:10px;">ğŸ“‹ ì˜ˆì•½ ëª©ë¡</div>
            <div id="reserve-list"></div>
        </div>
    </div>

    <div class="main-view">
        <div class="search-container">
            <input type="text" id="main-search-input" class="main-search" placeholder="ë…¸ë˜ ì œëª©ì´ë‚˜ ê°€ìˆ˜ë¥¼ ì…ë ¥í•˜ê³  Enter!">
        </div>

        <section id="section-home" class="content-section active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2 style="margin:0;">ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ì°¨íŠ¸</h2>
                <button onclick="luckyDraw()" style="padding:10px 20px; border-radius:50px; border:none; background:#ffcc00; color:#000; font-weight:bold; cursor:pointer;">ğŸ² ëœë¤ ì¶”ì²œ</button>
            </div>
            <div id="chart-list"></div>
        </section>

        <section id="section-favs" class="content-section">
            <h2>â¤ï¸ ë‚˜ì˜ ì• ì°½ê³¡</h2>
            <div id="fav-list"></div>
        </section>

        <section id="section-billing" class="content-section">
            <h2>ğŸ’³ ë©¤ë²„ì‹­ ìš”ê¸ˆì œ</h2>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                <div style="background:var(--glass); padding:40px; border-radius:30px; text-align:center;">
                    <h3 style="opacity:0.6;">ì¼ë°˜ íšŒì›</h3>
                    <h1 style="margin:20px 0;">0ì›</h1>
                    <button class="btn-action" style="background:#444; cursor:default;">ì´ìš© ì¤‘</button>
                </div>
                <div style="background:rgba(255, 0, 123, 0.1); padding:40px; border-radius:30px; text-align:center; border:1px solid var(--ss-pink);">
                    <h3 style="color:var(--ss-pink);">VIP í”„ë¦¬ë¯¸ì—„</h3>
                    <h1 style="margin:20px 0;">9,900ì›</h1>
                    <button class="btn-action" onclick="upgradePlan()">ì§€ê¸ˆ ê²°ì œí•˜ê¸°</button>
                </div>
            </div>
        </section>

        <section id="section-profile" class="content-section">
            <h2>ğŸ‘¤ ë‚´ ì •ë³´ ê´€ë¦¬</h2>
            <div style="background:var(--glass); padding:30px; border-radius:25px; max-width:450px;">
                <label style="display:block; margin-bottom:10px; font-size:14px; opacity:0.8;">ë‹‰ë„¤ì„ ë³€ê²½</label>
                <input type="text" id="edit-nickname" placeholder="ìƒˆ ë‹‰ë„¤ì„ ì…ë ¥" style="width:100%; padding:15px; margin-bottom:20px; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
                <button class="btn-action" onclick="updateNickname()">ë³€ê²½ ë‚´ìš© ì €ì¥</button>
                <button onclick="doLogout()" style="width:100%; background:none; color:#ff4d4d; border:1px solid #ff4d4d; padding:12px; border-radius:12px; cursor:pointer; margin-top:20px;">ì•ˆì „í•˜ê²Œ ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </section>
    </div>

    <div id="karaoke-view">
        <div id="live-hud" style="position:absolute; top:40px; right:50px; text-align:right;">
        </div>
        
        <div id="yt-player" style="width:85%; aspect-ratio:16/9; border-radius:25px; overflow:hidden; border: 2px solid rgba(255,255,255,0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.8);"></div>
        
        <div style="margin-top:30px; display:flex; flex-direction:column; align-items:center; gap:20px; width:100%;">
            <div style="display:flex; gap:15px;">
                <button class="btn-control" onclick="changeKey(-1)">KEY â™­</button>
                <span id="key-val" style="font-size:20px; font-weight:bold; min-width:30px; text-align:center;">0</span>
                <button class="btn-control" onclick="changeKey(1)">KEY â™¯</button>
                <button class="btn-control" onclick="toggleClubMode()" style="background:linear-gradient(to right, #00f2fe, #4facfe); border:none;">ğŸŒˆ í´ëŸ½ì¡°ëª…</button>
                <button class="btn-control" style="background:var(--ss-pink); border:none;" onclick="exitKaraoke()">ğŸ›‘ ë…¸ë˜ ì¢…ë£Œ</button>
            </div>
            <canvas id="visualizer" style="width:60%; height:80px;"></canvas>
        </div>
    </div>

    <div id="score-modal">
        <div class="score-card">
            <h2 style="color:var(--ss-pink); margin:0;">SingStar ì ìˆ˜</h2>
            <div id="final-score" style="font-size:100px; font-weight:900; margin:20px 0; font-style:italic;">0</div>
            <p id="score-comment" style="opacity:0.8;">ì˜¤ëŠ˜ ì»¨ë””ì…˜ ìµœê³ ì¸ë°ìš”? ğŸ‰</p>
            <div class="share-btns">
                <button class="btn-kakao" onclick="window.shareToKatalk()">ì¹´í†¡ ìë‘</button>
                <button class="btn-close" onclick="closeScore()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js"></script>
    <script>
      if (!Kakao.isInitialized()) {
        // ì´ë¯¸ ë°œê¸‰ë°›ìœ¼ì‹  í‚¤ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
        Kakao.init('cc6a6b5b5edd90eac6f308fbf5f1ea13');
      }
    </script>
    <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
  }
</script>
</body>
</html>