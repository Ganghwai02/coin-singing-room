<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SingStar â˜… ì½”ì¸ ë…¸ë˜ë°©</title>
    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
    <style>
        :root { --ss-purple: #7d2ae8; --ss-pink: #ff007b; --glass: rgba(255, 255, 255, 0.07); }
        body { background: #0b0915; color: white; font-family: 'Pretendard', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */
        .neon-bg { position: fixed; width: 600px; height: 600px; background: radial-gradient(circle, var(--ss-purple) 0%, transparent 70%); filter: blur(100px); opacity: 0.15; z-index: 0; pointer-events: none; animation: drift 20s infinite alternate; }
        @keyframes drift { from { top: -10%; left: -10%; } to { top: 70%; left: 80%; } }
        
        /* ì‚¬ì´ë“œë°” */
        .sidebar { width: 280px; background: var(--glass); backdrop-filter: blur(30px); border-right: 1px solid rgba(255,255,255,0.1); padding: 30px; display: flex; flex-direction: column; z-index: 10; }
        .user-card { background: linear-gradient(135deg, var(--ss-purple), var(--ss-pink)); padding: 25px; border-radius: 25px; box-shadow: 0 15px 30px rgba(0,0,0,0.4); }
        .nav-menu { list-style:none; padding:0; margin-top:20px; }
        .nav-menu li { padding: 15px; border-radius: 12px; cursor: pointer; transition: 0.2s; margin-bottom: 5px; }
        .nav-menu li:hover { background: rgba(255,255,255,0.1); }
        .nav-menu li.active { background: white; color: black; font-weight: bold; }
        
        /* ì˜ˆì•½ ëª©ë¡ */
        .reserve-box { margin-top: 20px; background: rgba(0,0,0,0.3); border-radius: 20px; padding: 15px; flex-grow: 1; border: 1px solid rgba(255,255,255,0.05); overflow-y: auto; }
        .reserve-item { font-size: 13px; padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); color: #ccc; }
        
        /* ë©”ì¸ ë·° */
        .main-view { flex: 1; padding: 40px; overflow-y: auto; z-index: 10; }
        .content-section { display: none; animation: fadeIn 0.4s; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ê²€ìƒ‰ì°½ ë° ìë™ì™„ì„± */
        .search-container { margin-bottom: 30px; position: relative; width: 90%; }
        .main-search { width: 100%; padding: 15px 25px; border-radius: 30px; border: 1px solid #333; background: #1a1a2e; color: white; font-size: 16px; box-sizing: border-box; }
        #search-suggestions { display: none; position: absolute; top: 60px; left: 0; width: 100%; background: #1a1a2e; border: 1px solid #333; border-radius: 15px; z-index: 5000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); overflow: hidden; }
        .suggestion-item { padding: 15px 25px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.05); transition: 0.2s; }
        .suggestion-item:hover { background: rgba(255,255,255,0.1); }

        /* ì¹´ë“œ ë° ë²„íŠ¼ */
        .chart-card { display: flex; align-items: center; background: var(--glass); padding: 15px 20px; border-radius: 20px; margin-bottom: 12px; transition: 0.3s; }
        .btn-sing { background: var(--ss-pink); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-sing:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--ss-pink); }

        /* ë…¸ë˜ë°© ë·° */
        #karaoke-view { display: none; position: fixed; inset: 0; background: #000; z-index: 2000; flex-direction: column; align-items: center; justify-content: center; }
        #karaoke-remain-badge { position: absolute; top: 30px; left: 30px; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(10px); padding: 10px 25px; border-radius: 50px; border: 1px solid var(--ss-pink); font-weight: bold; z-index: 2100; color: white; }
        #score-overlay { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.95); padding: 40px; border-radius: 30px; border: 2px solid gold; text-align: center; z-index: 2100; }

        /* ê²°ì œ ì•Œë¦¼ íŒì—… */
        #purchase-toast { position: fixed; bottom: 20px; left: 20px; background: rgba(0, 0, 0, 0.85); color: white; padding: 15px 25px; border-radius: 15px; border-left: 5px solid var(--ss-pink); display: none; align-items: center; gap: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 3000; transition: 0.5s; }
    </style>
</head>
<body>
    <div class="neon-bg"></div>
    
    <div class="sidebar">
        <div class="user-card">
            <h3 id="display-name" style="margin:0;">ê°€ìˆ˜ë‹˜</h3>
            <p id="user-status" style="font-size:12px; margin:5px 0;">FREE MEMBER</p>
            <div style="font-size:11px; opacity:0.8;">ë‚¨ì€ ê³¡ìˆ˜: <span id="remain-songs-val">3</span>ê³¡</div>
        </div>
        <ul class="nav-menu">
            <li class="active" onclick="changeTab(this, 'home')">ğŸ  ì¸ê¸° ì°¨íŠ¸</li>
            <li onclick="changeTab(this, 'billing')">ğŸ’³ ë©¤ë²„ì‹­ ê²°ì œ</li>
            <li onclick="changeTab(this, 'profile')">ğŸ™ï¸ ë‚´ ì •ë³´ ê´€ë¦¬</li>
            <li onclick="startNextSong()" style="background:var(--ss-purple); margin-top:15px; text-align:center; color:white;">â–¶ï¸ ë‹¤ìŒ ê³¡ ì‹œì‘</li>
        </ul>
        <div class="reserve-box">
            <h5 style="margin:0 0 10px 0; color:var(--ss-pink);">ğŸ“‹ ì˜ˆì•½ ëª©ë¡</h5>
            <div id="reserve-list"><div class="reserve-item">ê³¡ì„ ì˜ˆì•½í•´ì£¼ì„¸ìš”</div></div>
        </div>
        <button onclick="doLogout()" style="margin-top:15px; background:none; border:none; color:#555; cursor:pointer;">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div class="main-view">
        <div class="search-container">
            <input type="text" id="main-search-input" class="main-search" placeholder="ì œëª©ì´ë‚˜ ê°€ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìë™ì™„ì„±)" onkeyup="showSuggestions(this.value)" onkeypress="handleSearch(event)" autocomplete="off">
            <div id="search-suggestions"></div>
        </div>

        <section id="section-home" class="content-section active">
            <h2>ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ì°¨íŠ¸</h2>
            <div id="chart-list"></div>
        </section>

        <section id="section-billing" class="content-section">
            <h2 style="margin-bottom:30px;">ğŸ’³ ë©¤ë²„ì‹­ ìš”ê¸ˆì œ</h2>
            <div style="display:flex; gap:25px; margin-top:20px; align-items: stretch;">
                <div class="chart-card" style="flex:1; flex-direction:column; padding:40px; text-align:center; background: rgba(255,255,255,0.03);">
                    <h3 style="margin:0; opacity:0.6;">ì¼ë°˜ íšŒì›</h3>
                    <div style="font-size:32px; font-weight:900; margin:20px 0;">0ì›</div>
                    <p style="font-size:13px; opacity:0.5;">í•˜ë£¨ ë”± 3ê³¡ë§Œ!<br>ê¸´ ê´‘ê³  ì‹œì²­ í›„ ì´ìš©</p>
                    <button class="btn-sing" style="background:#333; width:100%; margin-top:20px; cursor:default; color:#888;">í˜„ì¬ ì´ìš© ì¤‘</button>
                </div>
                <div class="chart-card" style="flex:1; flex-direction:column; padding:40px; text-align:center; border:2px solid var(--ss-pink); background: linear-gradient(180deg, rgba(255,0,123,0.1) 0%, rgba(0,0,0,0) 100%); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: 20px; right: -30px; background: gold; color: black; padding: 5px 40px; transform: rotate(45deg); font-size: 12px; font-weight: bold;">SALE 35%</div>
                    <div style="background:var(--ss-pink); color:white; font-size:11px; padding:4px 12px; border-radius:10px; align-self:center; margin-bottom:10px; font-weight:bold;">ì˜¤í”ˆ í•œì • íŠ¹ê°€</div>
                    <h3 style="margin:0; color:var(--ss-pink);">VIP ì—°ê°„ ì´ìš©ê¶Œ</h3>
                    <div style="margin:20px 0;">
                        <span style="font-size:16px; opacity:0.5; text-decoration: line-through; margin-right: 8px;">150,000ì›</span>
                        <div style="font-size:38px; font-weight:900;">99,000ì›</div>
                        <div style="font-size:13px; color: #00f2ff; margin-top: 5px; font-weight: bold;">í•˜ë£¨ ë‹¨ 270ì› ê¼´!</div>
                    </div>
                    <button class="btn-sing" onclick="upgradePlan()" style="width:100%; margin-top:10px;">99,000ì› ê²°ì œí•˜ê¸°</button>
                    <p style="font-size:11px; color: #ff4444; margin-top: 15px; font-weight: bold;">âš ï¸ ê³§ í• ì¸ì´ ì¢…ë£Œë©ë‹ˆë‹¤!</p>
                </div>
            </div>
        </section>

        <section id="section-profile" class="content-section">
            <h2>ğŸ‘¤ ë‚´ ì •ë³´ ê´€ë¦¬</h2>
            <div style="background:var(--glass); padding:30px; border-radius:25px; max-width:450px;">
                <label style="font-size:13px; color:#888;">ë‹‰ë„¤ì„ ìˆ˜ì •</label>
                <input type="text" id="edit-nickname" style="width:100%; padding:15px; margin:10px 0; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
                <button class="btn-sing" onclick="updateNickname()" style="width:100%;">ë³€ê²½ì‚¬í•­ ì €ì¥</button>
                <hr style="margin:30px 0; opacity:0.1;">
                <button onclick="deleteAccount()" style="color:#ff4444; background:none; border:none; cursor:pointer; font-weight:bold;">ì„œë¹„ìŠ¤ íƒˆí‡´í•˜ê¸°</button>
            </div>
        </section>
    </div>

    <div id="karaoke-view">
    <div id="karaoke-remain-badge">ë‚¨ì€ ê³¡: <span id="karaoke-remain-val">3</span>ê³¡</div>
    
    <div id="live-hud" style="position: absolute; top: 30px; right: 30px; text-align: right;">
        <div style="font-size: 14px; color: #00f2ff;">LIVE SCORE: <span id="live-score">0</span></div>
        <div id="combo-box" style="font-size: 24px; font-weight: 900; color: gold; display:none;">
            <span id="combo-count">0</span> COMBO!
        </div>
    </div>

    <div id="yt-player" style="width:80%; aspect-ratio:16/9; border-radius:20px; overflow:hidden;"></div>

    <div id="audio-controls" style="display:flex; gap:30px; margin-top:25px; background:rgba(255,255,255,0.1); padding:15px 40px; border-radius:50px; backdrop-filter:blur(10px);">
        <div class="control-group">
            <label>ğŸ”Š ë³¼ë¥¨</label>
            <input type="range" id="vol-control" min="0" max="100" value="80" oninput="updateAudio()">
        </div>
        <div class="control-group">
            <label>ğŸµ ì—ì½”</label>
            <input type="range" id="echo-control" min="0" max="100" value="30" oninput="updateAudio()">
        </div>
        <div class="control-group">
            <label>ğŸ¹ í‚¤ ì¡°ì ˆ</label>
            <div style="display:flex; align-items:center; gap:10px;">
                <button onclick="changeKey(-1)" style="background:#444; color:white; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer;">-</button>
                <span id="key-val" style="font-weight:bold; width:20px; text-align:center;">0</span>
                <button onclick="changeKey(1)" style="background:#444; color:white; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer;">+</button>
            </div>
        </div>
    </div>
    
    <button onclick="exitKaraoke()" style="margin-top:20px; opacity:0.5; background:none; color:white; border:none; cursor:pointer;">ì¢…ë£Œ</button>
</div>

<style>
    .control-group { display:flex; flex-direction:column; align-items:center; gap:5px; font-size:12px; }
    #audio-controls label { font-weight:bold; color:var(--ss-pink); margin-bottom:5px; }
</style>

    <div id="purchase-toast">
        <div style="font-size: 20px;">ğŸ”¥</div>
        <div>
            <div id="toast-user" style="font-weight: bold; font-size: 14px;"></div>
            <div style="font-size: 12px; opacity: 0.7;">ë°©ê¸ˆ VIP ì—°ê°„ ì´ìš©ê¶Œì„ êµ¬ë§¤í•˜ì…¨ìŠµë‹ˆë‹¤!</div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
</body>
</html>