<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SingStar â˜… ì½”ì¸ ë…¸ë˜ë°© Premium</title>
    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
    <style>
        :root { --ss-purple: #7d2ae8; --ss-pink: #ff007b; --glass: rgba(255, 255, 255, 0.07); }
        body { background: #0b0915; color: white; font-family: 'Pretendard', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        .neon-bg { position: fixed; width: 600px; height: 600px; background: radial-gradient(circle, var(--ss-purple) 0%, transparent 70%); filter: blur(100px); opacity: 0.15; z-index: 0; pointer-events: none; animation: drift 20s infinite alternate; }
        @keyframes drift { from { top: -10%; left: -10%; } to { top: 70%; left: 80%; } }
        
        /* ì‚¬ì´ë“œë°” */
        .sidebar { width: 300px; background: var(--glass); backdrop-filter: blur(30px); border-right: 1px solid rgba(255,255,255,0.1); padding: 30px; display: flex; flex-direction: column; z-index: 10; }
        .user-card { background: linear-gradient(135deg, var(--ss-purple), var(--ss-pink)); padding: 25px; border-radius: 25px; box-shadow: 0 15px 30px rgba(0,0,0,0.4); margin-bottom: 20px; }
        .nav-menu { list-style:none; padding:0; margin:0; }
        .nav-menu li { padding: 15px 20px; border-radius: 15px; cursor: pointer; transition: 0.2s; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }
        .nav-menu li:hover { background: rgba(255,255,255,0.1); }
        .nav-menu li.active { background: white; color: black; font-weight: bold; }
        .reserve-box { background: rgba(0,0,0,0.3); border-radius: 20px; padding: 20px; flex-grow: 1; border: 1px solid rgba(255,255,255,0.05); overflow-y: auto; margin-top: 20px; }
        .reserve-item { font-size: 13px; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); color: #ccc; }

        /* ì»¨í…ì¸  ì˜ì—­ */
        .main-view { flex: 1; padding: 40px 50px; overflow-y: auto; z-index: 10; }
        .search-container { margin-bottom: 40px; position: relative; width: 100%; max-width: 700px; }
        .main-search { width: 100%; padding: 18px 30px; border-radius: 40px; border: 1px solid #333; background: #1a1a2e; color: white; font-size: 16px; outline: none; box-sizing: border-box; transition: 0.3s; }
        .main-search:focus { border-color: var(--ss-pink); box-shadow: 0 0 15px rgba(255, 0, 123, 0.3); }

        /* ì¸ê¸° ì°¨íŠ¸ & ë²„íŠ¼ */
        #chart-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 15px; margin-top: 25px; }
        .chart-card { display: flex; align-items: center; background: rgba(255, 255, 255, 0.03); padding: 15px 20px; border-radius: 18px; border: 1px solid rgba(255, 255, 255, 0.05); }
        .rank-num { font-size: 22px; font-weight: 900; color: var(--ss-pink); margin-right: 15px; font-style: italic; }
        .song-info { flex: 1; }
        .btn-reserve { background: var(--ss-pink); color: white; border: none; padding: 8px 15px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 12px; }

        /* ê²°ì œ ì¹´ë“œ */
        .billing-grid { display: flex; gap: 30px; margin-top: 30px; }
        .plan-card { flex: 1; background: var(--glass); padding: 40px; border-radius: 30px; text-align: center; border: 1px solid rgba(255,255,255,0.1); position: relative; overflow: hidden; }
        .plan-card.premium { border: 2px solid var(--ss-pink); background: linear-gradient(180deg, rgba(255,0,123,0.1) 0%, rgba(0,0,0,0) 100%); }
        .badge-sale { position: absolute; top: 20px; right: -35px; background: gold; color: black; font-size: 12px; padding: 5px 40px; transform: rotate(45deg); font-weight: bold; }
        .btn-action { background: var(--ss-pink); color: white; border: none; padding: 15px; border-radius: 15px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 20px; }

        /* ë…¸ë˜ë°© ë·° (HUD & Visualizer) */
        #karaoke-view { display: none; position: fixed; inset: 0; background: #000; z-index: 9000; flex-direction: column; align-items: center; justify-content: center; }
        .audio-panel { display: flex; gap: 40px; margin-top: 30px; background: rgba(255,255,255,0.1); padding: 20px 50px; border-radius: 100px; backdrop-filter: blur(15px); }
        #visualizer { position: absolute; bottom: 130px; width: 50%; height: 80px; z-index: 9999; pointer-events: none; }

        /* ê²°ê³¼ ëª¨ë‹¬ */
        #score-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 10000; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .score-card { background: linear-gradient(135deg, #1a1a2e 0%, #0b0915 100%); padding: 50px; border-radius: 40px; border: 2px solid var(--ss-pink); text-align: center; box-shadow: 0 0 50px rgba(255, 0, 123, 0.4); max-width: 400px; width: 90%; }
        .share-btns { display: flex; gap: 10px; margin-top: 30px; }
        .btn-kakao { background: #fee500; color: #3c1e1e; flex: 1; padding: 15px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; }

        .content-section { display: none; animation: fadeIn 0.4s; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="neon-bg"></div>

    <div class="sidebar">
        <div class="user-card">
            <h3 id="display-name" style="margin:0;">ì•„ì´ìœ ì¢‹ì•„ìš©</h3>
            <p id="user-status" style="font-size:11px; margin:5px 0; opacity:0.8;">FREE MEMBER</p>
            <div style="font-size:11px;">ë‚¨ì€ ê³¡ìˆ˜: <span id="remain-songs-val">3</span>ê³¡</div>
        </div>
        <ul class="nav-menu">
            <li class="active" onclick="changeTab(this, 'home')">ğŸ  ì¸ê¸° ì°¨íŠ¸</li>
            <li onclick="changeTab(this, 'billing')">ğŸ’³ ë©¤ë²„ì‹­ ê²°ì œ</li>
            <li onclick="changeTab(this, 'profile')">ğŸ™ï¸ ë‚´ ì •ë³´ ê´€ë¦¬</li>
            <li onclick="startNextSong()" style="background:var(--ss-purple); margin-top:15px; color:white; justify-content:center; font-weight:bold;">â–¶ï¸ ë‹¤ìŒ ê³¡ ì‹œì‘</li>
        </ul>
        <div class="reserve-box">
            <div style="font-size:12px; color:var(--ss-pink); font-weight:bold; margin-bottom:10px;">ğŸ“‹ ì˜ˆì•½ ëª©ë¡</div>
            <div id="reserve-list"></div>
        </div>
    </div>

    <div class="main-view">
        <div class="search-container">
            <input type="text" id="main-search-input" class="main-search" placeholder="ì œëª©ì´ë‚˜ ê°€ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì‹¤ì‹œê°„ ê²€ìƒ‰)" onkeyup="showSuggestions(this.value)">
            <div id="search-suggestions" style="display: none; position: absolute; top: 65px; left: 0; width: 100%; background: #1a1a2e; border: 1px solid #333; border-radius: 20px; z-index: 5000; overflow: hidden;"></div>
        </div>

        <section id="section-home" class="content-section active">
            <h2>ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ì°¨íŠ¸</h2>
            <div id="chart-list"></div>
        </section>

        <section id="section-billing" class="content-section">
            <h2>ğŸ’³ ë©¤ë²„ì‹­ ìš”ê¸ˆì œ</h2>
            <div class="billing-grid">
                <div class="plan-card">
                    <h3 style="opacity:0.5;">ì¼ë°˜ íšŒì›</h3>
                    <div style="font-size:35px; font-weight:900; margin:25px 0;">0ì›</div>
                    <button class="btn-action" style="background:#333; cursor:default;">ì´ìš© ì¤‘</button>
                </div>
                <div class="plan-card premium">
                    <div class="badge-sale">SALE</div>
                    <h3 style="color:var(--ss-pink);">VIP ì—°ê°„ê¶Œ</h3>
                    <div style="margin:20px 0;">
                        <span style="font-size:16px; opacity:0.4; text-decoration:line-through;">150,000ì›</span>
                        <div style="font-size:40px; font-weight:900;">99,000ì›</div>
                    </div>
                    <button class="btn-action" onclick="upgradePlan()">ì§€ê¸ˆ í• ì¸ë°›ê³  ê²°ì œ</button>
                </div>
            </div>
        </section>

        <section id="section-profile" class="content-section">
            <h2>ğŸ‘¤ ë‚´ ì •ë³´ ê´€ë¦¬</h2>
            <div style="background:var(--glass); padding:30px; border-radius:20px; max-width:400px;">
                <label style="font-size:12px; color:#888;">ë‹‰ë„¤ì„ ë³€ê²½</label>
                <input type="text" id="edit-nickname" style="width:100%; padding:15px; margin:15px 0; border-radius:12px; border:1px solid #333; background:#000; color:white; box-sizing:border-box;">
                <button class="btn-action" onclick="updateNickname()">ì €ì¥í•˜ê¸°</button>

                <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:30px 0;">

                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="doLogout(event)" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 12px; border-radius: 12px; cursor: pointer; font-weight: bold;">ë¡œê·¸ì•„ì›ƒ</button>
                    <button onclick="deleteAccount(event)" style="background: none; color: #ff4d4d; border: 1px solid #ff4d4d; padding: 12px; border-radius: 12px; cursor: pointer; font-size: 13px; margin-top: 10px;">íšŒì› íƒˆí‡´</button>
                </div>
            </div>
        </section>
    </div>

    <div id="karaoke-view">
        <button onclick="exitKaraoke()" style="position: absolute; top: 30px; left: 30px; z-index: 9999; background: var(--ss-pink); color: white; border: none; padding: 15px 25px; border-radius: 50px; font-weight: 900; cursor: pointer; box-shadow: 0 0 20px rgba(255, 0, 123, 0.5); font-size: 16px;">âœ• ì¢…ë£Œ ë° ì ìˆ˜ë³´ê¸°</button>

        <div id="live-hud" style="position:absolute; top:30px; right:40px; text-align:right; z-index: 9999;">
            <div style="font-size:12px; opacity:0.7; color:white;">LIVE SCORE</div>
            <div id="live-score" style="font-size:50px; font-weight: 900; color: #fff; text-shadow: 0 0 20px var(--ss-pink);">0</div>
        </div>

        <div id="yt-player" style="width:85%; aspect-ratio:16/9; border-radius:30px; overflow:hidden; border: 4px solid rgba(255,255,255,0.1); z-index: 9001;"></div>

        <canvas id="visualizer"></canvas>

        <div class="audio-panel" style="z-index: 9999; margin-top: 20px;">
            <div style="text-align:center;"><label style="font-size:10px; color:var(--ss-pink);">VOLUME</label><br><input type="range"></div>
            <div style="text-align:center;"><label style="font-size:10px; color:var(--ss-pink);">ECHO</label><br><input type="range"></div>
            <div style="text-align:center;">
                <label style="font-size:10px; color:var(--ss-pink);">KEY</label><br>
                <button class="btn-reserve" style="width:30px; height:30px; border-radius:50%;" onclick="changeKey(-1)">-</button>
                <span id="key-val" style="margin:0 15px; font-weight:bold;">0</span>
                <button class="btn-reserve" style="width:30px; height:30px; border-radius:50%;" onclick="changeKey(1)">+</button>
            </div>
        </div>
    </div>

    <div id="score-modal">
        <div class="score-card">
            <h1 style="color:var(--ss-pink); margin:0;">CONGRATS!</h1>
            <p style="opacity:0.6;">ì˜¤ëŠ˜ì˜ ë…¸ë˜ ì‹¤ë ¥ì€?</p>
            <div id="final-score" style="font-size: 80px; font-weight: 900; margin: 20px 0; color:white;">0</div>
            <p id="score-comment" style="font-weight: bold; color: #00f2ff;">ê°€ìˆ˜ ë°ë·”í•˜ì…”ë„ ë˜ê² ì–´ìš”! ğŸ¤</p>
            
            <div class="share-btns">
                <button class="btn-kakao" onclick="shareKakao()">ì¹´í†¡ìœ¼ë¡œ ìë‘í•˜ê¸°</button>
                <button class="btn-action" style="margin-top:0; flex:1;" onclick="closeScore()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>